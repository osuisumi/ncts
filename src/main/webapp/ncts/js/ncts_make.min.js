///<jscompress sourcefile="common.js" />
///<jscompress sourcefile="addTopic.js" />
/*------ add topic function -------*////<jscompress sourcefile="addTestQuestion.js" />
/*------ add topic function -------*////<jscompress sourcefile="evaluateStar.js" />
/*
----------------
use：star evaluate
edition：v.10
----------------
*////<jscompress sourcefile="photoAlbum.js" />
//相片预览
///<jscompress sourcefile="photo3d.js" />
//定义研修模块js
$(document).ready(function(){commonJs.fn.init();$("input,textarea").placeholder();$(".m-selectbox select").simulateSelectBox();$(".m-radio-tick input").bindCheckboxRadioSimulate();$(".m-checkbox-tick input").bindCheckboxRadioSimulate()});var commonJs=$(window).commonJs||{};commonJs.fn={init:function(){this.toTop();this.searchAnimate()},aJumpLayer:function(a){a=$(a);var c=a.innerWidth(),b=a.innerHeight();a.show().css({"margin-top":-b/2+"px","margin-left":-c/2+"px"});$(".m-blackbg").show();a.find(".u-confirm-btn").bind("click",function(){a.hide();$(".m-blackbg").hide()});a.find(".u-cancel-btn").bind("click",function(){a.hide();$(".m-blackbg").hide()});a.find(".u-close-btn").bind("click",function(){a.hide();$(".m-blackbg").hide()})},openABlayer:function(a){a=$(a);var c=$(".m-blackbg"),b=$(window).scrollTop();a.show().css("top",b+100+"px");c.show();this.closeABlayer(a,c)},closeABlayer:function(a,c){var b=a.find(".u-close-btn"),d=a.find(".u-cancel-btn"),f=a.find(".u-confirm-btn");b.on("click",function(){a.hide();c.hide()});d.on("click",function(){a.hide();c.hide()});f.on("click",function(){a.hide();c.hide()})},toTop:function(){$(document).on("click","#toTop",function(){$("html,body").animate({scrollTop:0},100);return!1})},searchAnimate:function(){function a(){$(".m-srh .ipt").on("focus",function(){var a=$(this),d=a.next();""==a.val()&&(a.stop().animate({width:"146px","padding-left":"12px"},500),d.stop().animate({right:"10px"},500))});$(".m-srh .ipt").on("blur",function(){var a=$(this),d=a.next();""==a.val()&&(a.stop().animate({width:"60px","padding-left":"98px"},500),d.stop().animate({right:"100px"},500))})}function c(){$(".m-srh .ipt").on("blur",function(){var a=$(this).parent();""==$(this).val()?a.removeClass("hasValue"):a.addClass("hasValue")})}"Microsoft Internet Explorer"==navigator.appName?a():c()},guideHint:function(a,c){var b=!1;""!=c&&"undefined"!=c&&null!=c&&void 0!=c&&(b=!0);$("body").append(a);$(".g-guide-hint .confirm").on("click",function(){$(this).parents(".g-guide-hint").remove();$(".m-guideShade").remove();b&&c()})}};$.fn.extend({myTab:function(a){a=$.extend({pars:".myTab",tabNav:".tabNav",li:"li",tabCon:".tabCon",tabList:".tabList",cur:"cur",eType:"click",page:0},a);var c=$(this),b=c.find(a.tabNav).find(a.li);tabList=c.find(a.tabCon).find(a.tabList);this.each(function(){b.removeClass(a.cur);b.eq(a.page).addClass(a.cur);tabList.hide();tabList.eq(a.page).show();b.eq(a.page).show();b.on(a.eType,function(){var b=$(this).parents(a.tabNav).find(a.li).index(this);$(this).addClass(a.cur).siblings().removeClass(a.cur);$(this).parents(a.pars).find(a.tabCon).find(a.tabList).eq(b).css({display:"block"}).siblings().css({display:"none"})})});return this}});(function(a){a.fn.simulateSelectBox=function(c){c=a.extend(!0,{selectText:".simulateSelect-text",byValue:null},c);var b=c.selectText,d=c.byValue;return this.each(function(){var c=a(this);c.find("option").prop("selected",!1);if(""==d||null==d||void 0==d)c.find("option").eq(0).prop("selected",!0);else for(var g=1;g<c.find("option").length;g++)c.find("option").eq(g).val()==d&&c.find("option").eq(g).prop("selected",!0);c.parent().find(b).text(c.find("option:selected").text())}).on("change",function(){a(this).parent().find(b).text(a(this).find("option:selected").text())})}})(jQuery);(function(a){a.fn.bindCheckboxRadioSimulate=function(c){function b(b){var c;void 0!=b.attr("type")&&(c=b.attr("type"),"checkbox"==c?b.prop("checked")?d.checkbox_checked_fn(b):d.checkbox_nochecked_fn(b):"radio"==c&&void 0!=b.attr("name")&&(c=b.attr("name"),b.prop("checked")?(d.radio_checked_fn(b),a("input[name\x3d'"+c+"']").not(b).each(function(){d.radio_nochecked_fn(a(this))})):d.radio_nochecked_fn(b)))}var d={className:"on",onclick:null,checkbox_checked_fn:function(a){a.parent().addClass(this.className)},checkbox_nochecked_fn:function(a){a.parent().removeClass(this.className)},radio_checked_fn:function(a){a.parent().addClass(this.className)},radio_nochecked_fn:function(a){a.parent().removeClass(this.className)}};a.extend(!0,d,c);return this.each(function(){b(a(this))}).click(function(){b(a(this));if(d.onclick)d.onclick(this,{isChecked:a(this).prop("checked"),objThis:a(this)})})}})(jQuery);(function(a,c,b){function d(a){var d={},c=/^jQuery\d+$/;b.each(a.attributes,function(a,b){b.specified&&!c.test(b.name)&&(d[b.name]=b.value)});return d}function f(a,d){var f=b(this);if(this.value==f.attr("placeholder")&&f.hasClass("placeholder"))if(f.data("placeholder-password")){f=f.hide().next().show().attr("id",f.removeAttr("id").data("placeholder-id"));if(!0===a)return f[0].value=d;f.focus()}else this.value="",f.removeClass("placeholder"),this==c.activeElement&&this.select()}function g(){var a,c=b(this),g=this.id;if(""==this.value){if("password"==this.type){if(!c.data("placeholder-textinput")){try{a=c.clone().attr({type:"text"})}catch(h){a=b("\x3cinput\x3e").attr(b.extend(d(this),{type:"text"}))}a.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":g}).bind("focus.placeholder",f);c.data({"placeholder-textinput":a,"placeholder-id":g}).before(a)}c=c.removeAttr("id").hide().prev().attr("id",g).show()}c.addClass("placeholder");c[0].value=c.attr("placeholder")}else c.removeClass("placeholder")}var h="placeholder"in c.createElement("input"),l="placeholder"in c.createElement("textarea"),k=b.fn,m=b.valHooks;h&&l?(k=k.placeholder=function(){return this},k.input=k.textarea=!0):(k=k.placeholder=function(){this.filter((h?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":f,"blur.placeholder":g}).data("placeholder-enabled",!0).trigger("blur.placeholder");return this},k.input=h,k.textarea=l,k={get:function(a){var d=b(a);return d.data("placeholder-enabled")&&d.hasClass("placeholder")?"":a.value},set:function(a,d){var h=b(a);if(!h.data("placeholder-enabled"))return a.value=d;""==d?(a.value=d,a!=c.activeElement&&g.call(a)):h.hasClass("placeholder")?f.call(a,!0,d)||(a.value=d):a.value=d;return h}},h||(m.input=k),l||(m.textarea=k),b(function(){b(c).delegate("form","submit.placeholder",function(){var a=b(".placeholder",this).each(f);setTimeout(function(){a.each(g)},10)})}),b(a).bind("beforeunload.placeholder",function(){b(".placeholder").each(function(){this.value=""})}))})(this,document,jQuery);String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};String.prototype.equalsIgnoreCase=function(a){return this.toLowerCase()==a.toLowerCase()};$.extend({ajaxQuery:function(a,c,b,d){if(null==d||""==d)d="get";$.ajax({url:$("#"+a).attr("action"),data:$("#"+a).serialize(),type:d,success:function(a){$("#"+c).html(a);void 0!=b&&(a=b,$.isFunction(a)||(a=eval("("+b+")")),a())}})},ajaxSubmit:function(a){var c=$("#"+a).serialize(),b=$("#"+a).attr("method");if("delete"==b||"DELETE"==b||"put"==b||"PUT"==b)c="_method\x3d"+b+"\x26"+c;return $.ajax({url:$("#"+a).attr("action"),data:c,type:"post",async:!1,beforeSend:function(){ajaxLoading()},success:function(a){},complete:function(){ajaxEnd()}}).responseText},ajaxDelete:function(a,c,b){$.ajax({url:a,type:"post",data:"_method\x3dDELETE\x26"+c,success:function(a){if(void 0!=b){var c=b;$.isFunction(c)||(c=eval("("+b+")"));c(a)}}})},put:function(a,c,b){$.ajax({url:a,type:"post",data:"_method\x3dPUT\x26"+c,success:function(a){if(void 0!=b){var c=b;$.isFunction(c)||(c=eval("("+b+")"));c(a)}}})}});function ajaxLoading(){mylayerFn.loading({id:999,content:"\u6b63\u5728\u52a0\u8f7d\u4e2d...",shade:[.4,"#ccc"]})}function ajaxEnd(){mylayerFn.close(999)}function assignParam(a,c){$.each($("#"+a+" :input"),function(){$(this).val($("#"+$(this).attr("id")+"_"+c).text())})}function checkAllBox(a,c){$(c).click(function(){$(this).prop("checked")?$("#"+a+" :checkbox").each(function(){$(this).prop("checked",!0)}):$("#"+a+" :checkbox").each(function(){$(this).prop("checked",!1)})})}function initLimit(a,c,b,d){a.keyup(function(){var f=a.val(),g=0;if(b){for(var h=0;h<f.length;h++)255<f.charCodeAt(h)?g+=2:g++;f=Math.floor((c-g)/2)}else g=f.length,f=c-g;d(f)})}function guid(){return(G()+G()+""+G()+""+G()+""+G()+""+G()+G()+G()).toUpperCase()}function G(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function hintJumpLayer(){$(".m-blackbg").show();var a=$(".g-layer-warning"),c=a.innerWidth(),b=a.innerHeight();a.show().css({"margin-top":-b/2+"px","margin-left":-c/2+"px"})}window.alert=function(a,c,b){if(null==b||""==b)b=1500;mylayerFn.msg(a,{time:b},c)};window.confirm=function(a,c,b){mylayerFn.confirm({content:a,icon:3,yesFn:c,cancelFn:b})};function getByteLength(a){for(var c=a.trim().length,b=0;b<a.length;b++)127<a.charCodeAt(b)&&(c+=2);return c}function getSuffix(a){var c=a.lastIndexOf(".");return a.substring(c+1,a.length)}function getOuterHtml(a){for(var c=$("\x3cdiv\x3e\x3c/div\x3e"),b=0;b<a.length;b++)c.append($(a[b]).clone());return c.html()}function isMatchJson(a){return a.match("^{(.+:.+,*){1,}}$")?!0:!1}function closeLayer(){var a=parent.layer.getFrameIndex(window.name);parent.layer.close(a)}function downloadFile(a,c,b,d){$('#downloadFileForm input[name\x3d"id"]').val(a);$('#downloadFileForm input[name\x3d"fileName"]').val(c);$('#downloadFileForm input[name\x3d"fileRelations[0].type"]').val(b);$('#downloadFileForm input[name\x3d"fileRelations[0].relation.id"]').val(d);$("#downloadFileForm").submit()}function updateFile(a,c){$('#updateFileForm input[name\x3d"id"]').val(a);$('#updateFileForm input[name\x3d"fileName"]').val(c);$.post("/file/updateFileInfo.do",$("#updateFileForm").serialize())}function deleteFileRelation(a,c,b){$('#deleteFileRelationForm input[name\x3d"fileId"]').val(a);$('#deleteFileRelationForm input[name\x3d"relation.id"]').val(c);$('#deleteFileRelationForm input[name\x3d"type"]').val(b);$.post("/file/deleteFileRelation.do",$("#deleteFileRelationForm").serialize())}function deleteFileInfo(a){$('#deleteFileInfoForm input[name\x3d"id"]').val(a);$.post("/file/deleteFileInfo.do",$("#deleteFileInfoForm").serialize())}function createCourseIndex(){window.location.href="/make/course?orders\x3dCREATE_TIME.DESC"}function goEditUser(a){mylayerFn.open({type:2,title:"\u4e2a\u4eba\u8d44\u6599",fix:!1,area:[650,$(window).height()],content:"/ncts/users/"+a+"/edit",shadeClose:!0})}function goChangePassword(){mylayerFn.open({type:2,title:"\u4fee\u6539\u5bc6\u7801",fix:!1,area:[620,480],content:"/ncts/account/edit_password"})}function previewFile(a){mylayerFn.open({id:"previewFileDiv",type:2,title:"\u9884\u89c8\u6587\u4ef6",fix:!0,area:[99*$(window).width()/100,99*$(window).height()/100],content:"/file/previewFile?fileId\x3d"+a,shadeClose:!0})}function showSearchBoxAnimate(){$(".showSearchBox .ipt").on({focus:function(){$(this).parent().addClass("in")},blur:function(){$(this)}})}function LayerOpreationFn(a,c){var b=$("#courseLearning"),d=$("#studyFrameShade"),f=$(c),g=f.children(".closeStudyLayerBtn");b.on("click",a,function(){d.show();f.addClass("open");$("html,body").css("overflow","hidden");g.on("click",function(){$(this).parent().removeClass("open");d.hide();$("html,body").css("overflow","visible")})})}function LayerOpreationFnAjax(a,c,b){$(a).click(function(){$.get(b,null,function(a){a=$(a);$("#courseLearning");var b=$("#studyFrameShade"),g=$(c),h=a.children(".closeStudyLayerBtn");g.empty();g.append(a);b.show();g.addClass("open");$("html,body").css("overflow","hidden");h.on("click",function(){$(this).closest(".open").removeClass("open");b.hide();$("html,body").css("overflow","visible")})})})}function slide(){var a=$("#lTr"),c=$(".g-study-sd"),b=c.outerWidth(),d=c.innerHeight(),f=$(".m-study-box"),g=$(".g-study-frame");a.on("click",function(){c.toggleClass("hide");$(this).toggleClass("act");c.hasClass("hide")?(c.stop().animate({width:0,opacity:0},400,function(){var a=$(".g-study-mn").innerWidth(),b=$(".m-study-opt").width(),b=$(".m-study-opt").innerWidth()-b;$("#studySelectAct .list-box").width(a-b);studySelectAct.star(0)}),g.stop().animate({paddingLeft:0},400),f.addClass("act")):(c.stop().animate({width:b-1+"px",opacity:1},400,function(){var a=$(".g-study-mn").innerWidth(),b=$(".m-study-opt").width(),b=$(".m-study-opt").innerWidth()-b;$("#studySelectAct .list-box").width(a-b);studySelectAct.star(0)}),g.stop().animate({paddingLeft:b},400),f.removeClass("act"));c.height(d)})}function active_tip(a,c){if(null!=c&&""!=c){if("Y"==$.cookie("active_tip_new_"+c)){var b=$(".g-studyShade"),d=$(".active-tipindex"),f=$("#g-animation");d.css({display:"none"});b.css({display:"none"});f.stop(!0,!0).animate({right:0},800,function(){animation(a)});return!1}$.cookie("active_tip_new_"+c,"Y",{expires:30,path:"/"})}var b=$(".g-studyShade"),d=$(".active-tipindex"),g=$(".g-study-mn").offset().top,h=$(".g-study-mn").offset().left;b.css({display:"block"});$(".active-tipindex.step0").css({display:"block",top:g+19,left:h-58});d.find(".Abtn0").on("click",function(){d.css({display:"none"});$(".active-tipindex.step1").css({display:"block",top:g,left:h+3})});d.find(".Abtn1").on("click",function(){d.css({display:"none"});$(".active-tipindex.step2").css({display:"block",top:g,left:h+55})});d.find(".Abtn2").on("click",function(){d.css({display:"none"});$(".active-tipindex.step3").css({display:"block",top:g-69,left:h+530})});d.find(".Abtn3").on("click",function(){d.css({display:"none"});$(".active-tipindex.step4").css({display:"block",top:g+2,left:h+650})});d.find(".Abtn4").one("click",function(b){var c=$("#g-animation"),d=c.offset();$(this);$('\x3cimg class\x3d"u-flyer" src\x3d"'+a+'/css/images/animation1.gif"\x3e').fly({start:{left:b.pageX,top:b.pageY},end:{left:d.left+10,top:d.top+10,width:0,height:0},onEnd:function(){c.stop(!0,!0).animate({right:0},800,function(){animation(a)})}})});d.find(".Abtn4").on("click",function(a){d.css({display:"none"});b.css({display:"none"})})}function animation(a){var c=$("#g-animation"),b=c.find(".tips"),d=c.find("img"),f=a+"/css/images/animation2.gif",g=a+"/css/images/animation3.gif";clearTimeout(null);setTimeout(function(){b.animate({opacity:1,bottom:"140px"},1E3).delay(2E3).animate({opacity:0,bottom:"180px"},1E3,function(){b.css("bottom","80px")})},0);c.on("mouseover",function(){d.attr("src",f);b.is(":animated")||b.stop(!0,!0).animate({opacity:1,bottom:"140px"},800)}).on("mouseout",function(){d.attr("src",g);b.stop(!0,!0).css({opacity:0,bottom:"80px"})})}commonJs.tag={init:function(a){commonJs.tag.init_tag_param(a);$(".m-add-tag").each(function(){var c=$(this);$ipt_parents=c.find(".m-tagipt");$ipt=$ipt_parents.find(".u-pbIpt");$hint_lst=$ipt_parents.find(".l-slt-lst");$add_btn=c.find(".u-add-tag");$tag_lst=c.find(".m-tag-lst");commonJs.tag.tag_hint_show($ipt,$add_btn,$hint_lst);commonJs.tag.add_tag($ipt,$add_btn,$tag_lst,a);commonJs.tag.delete_tag($tag_lst,a)})},tag_hint_show:function(a,c,b){a.on("focus",function(){""==!$(this).val()&&b.show()});a.on("keyup",function(){""==!$(this).val()?$.get("/tags","tag.name\x3d"+$(this).val(),function(a){null!=a&&0<$(a).length&&(b.find(".lst").empty(),$(a).each(function(){b.find(".lst").append('\x3ca href\x3d"###" id\x3d"'+this.id+'" title\x3d"'+this.name+'"\x3e'+this.name+"\x3c/a\x3e")}),b.show())}):b.hide()});commonJs.tag.tag_hint_hide(a,b)},tag_hint_hide:function(a,c){$(document).on("click",function(b){b=$(b.target);0==b.closest(c).length&&0==b.closest(a).length&&c.hide()});c.on("click","a",function(){c.hide();a.val($(this).text());$add_btn.trigger("click")})},add_tag:function(a,c,b,d){c.on("click",function(){var c=!1,g=b.children().length;if(""!=a.val()){for(var h=0;h<g;h++)a.val()==b.children().eq(h).find(".txt").text()&&(alert("\u5df2\u6709\u76f8\u540c\u6807\u7b7e"),a.val(""),a.focus(),c=!0);if(!c){var l="",k="",c=$hint_lst.find(".lst").find('a[title\x3d"'+a.val()+'"]');0==c.length?$.ajax({url:"/tags",data:"name\x3d"+a.val(),type:"post",async:!1,success:function(a){"00"==a.responseCode&&(a=a.responseData,l=a.id,k=a.name)}}):(l=c.attr("id"),k=c.attr("title"));b.append('\x3cli class\x3d"tagLi" id\x3d"'+l+'" \x3e\x3cspan class\x3d"txt"\x3e'+k+'\x3c/span\x3e\x3ca href\x3d"javascript:void(0);" class\x3d"dlt" title\x3d"\u5220\u9664\u6807\u7b7e"\x3e\u00d7\x3c/a\x3e\x3c/li\x3e');a.val("");commonJs.tag.init_tag_param(d)}}})},delete_tag:function(a,c){a.on("click",".dlt",function(){$(this).parent().remove();commonJs.tag.init_tag_param(c)})},init_tag_param:function(a){var c=$("#tagList").closest("form");c.find(".tagParam").remove();$("#tagList").find(".tagLi").each(function(b){var d=$(this).attr("id");c.append('\x3cinput class\x3d"tagParam" name\x3d"'+a+"tags["+b+'].id" value\x3d"'+d+'" type\x3d"hidden"/\x3e')})}};$(function(){addCourseFn.init()});var addCourseFn=$(window).addCourseFn||{},addCourseFn={init:function(){this.addCourseBoxHeight()},addCourseBoxHeight:function(){var a=$(".g-addCourse-cont"),c=$(window).height();a.css("min-height",c-308+"px")},settingSwitchFn:function(a,c,b){function d(){f?(a.removeClass("z-crt"),c.hide(),f=!1):(a.addClass("z-crt"),c.show(),f=!0)}var f=null;""==b||"undefined"==b||null==b||void 0==b?f=!0:0==b&&(f=!1);d();a.on("click",function(){d()})},deleteDisabled:function(){$(".chooseTickUnit:checked").parents(".chooseTickItem").find(".byChooseTick a,.byChooseTick input,.byChooseTick button").removeClass("disabled").removeAttr("disabled");$(".chooseTickUnit").on("click",function(){var a=$(this);a.attr("checked","checked")&&(a.parents(".chooseTickBox").find(".byChooseTick a, .byChooseTick input,.byChooseTick button").addClass("disabled").attr("disabled",!0),a.parents(".chooseTickItem").find(".byChooseTick a,.byChooseTick input,.byChooseTick button").removeClass("disabled").removeAttr("disabled"))})},commentOpt:function(a){$(a+" .u-textarea").on("focus",function(){var c=$(this),b=c.parents(a),d=b.find(".m-cmtBtn-block");b.find(".u-cmtPublish-btn");c.stop().animate({height:"76px"},200,function(){d.show()});$(document).on("click",function(b){0==$(b.target).closest(a).length&&""==c.val()&&c.stop().animate({height:"22px"},100,function(){d.hide()})})})},addPeople:function(){$("#g-bd").on("click","#addPeopleBtn",function(){var a=$(this),c=a.prevAll(".u-pbIpt"),b=$.trim(c.val()),a=a.parent().next();""==b||null==b||void 0==b?layer.msg("\u540d\u5b57\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01",{icon:7,time:1500},function(){c.focus()}):(a.append("\x3cli\x3e\x3cspan\x3e"+b+'\x3c/span\x3e\x3ca href\x3d"javascript:void(0);" class\x3d"delete"\x3e\u00d7\x3c/a\x3e\x3c/li\x3e'),c.focus().val(""))});(function(){$("#g-bd").on("click",".m-addPeople-fn .list .delete",function(){$(this).parent().remove()})})()},courseSettingFQA:function(){function a(a,c){var g;g=""==c||null==c||void 0==c?!1:c;a.on("click",".cancelBtn",function(){g?$(this).parents(".faq-item").remove():(a.next().show(),a.remove());b=!0;$("#addFqaBtn").prop("disabled",!1).removeClass("disabled")})}function c(a,c){var g;g=""==c||null==c||void 0==c?!1:c;a.on("click",".confirmBtn",function(){var c=a.find(".questionInput"),f=a.find(".answerInput"),k=$.trim(c.val()),m=$.trim(f.val());""==k||null==k||void 0==k?layer.msg("\u95ee\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01",{icon:7,time:1500},function(){c.focus()}):""==m||null==m||void 0==k?layer.msg("\u7b54\u6848\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01",{icon:7,time:1500},function(){f.focus()}):(g?a.after('\x3cdiv class\x3d"txt-row"\x3e\x3cdiv class\x3d"faq-q"\x3e\x3cspan class\x3d"line"\x3e\x3c/span\x3e\x3ci class\x3d"u-faqD-ico"\x3e\u95ee\x3c/i\x3e\x3ch3 class\x3d"txt-q"\x3e\x3cspan class\x3d"txt"\x3e\u670d\u52a1\u5668\u51fa\u9519\uff01\x3c/span\x3e\x3ca href\x3d"javascript:void(0);" class\x3d"u-opt u-alter"\x3e\x3ci class\x3d"u-alter-ico"\x3e\x3c/i\x3e\x3cspan class\x3d"tip"\x3e\u7f16\u8f91\x3c/span\x3e\x3c/a\x3e\x3ca href\x3d"javascript:void(0);" class\x3d"u-opt u-delete"\x3e\x3ci class\x3d"u-delete-ico"\x3e\x3c/i\x3e\x3cspan class\x3d"tip"\x3e\u5220\u9664\x3c/span\x3e\x3c/a\x3e\x3c/h3\x3e\x3c/div\x3e\x3cdiv class\x3d"faq-a"\x3e\x3ci class\x3d"u-faqU-ico"\x3e\u7b54\x3c/i\x3e\x3cp class\x3d"txt-a"\x3e\x3cspan class\x3d"txt"\x3e\u670d\u52a1\u5668\u51fa\u9519\uff01\x3c/span\x3e\x3ca href\x3d"javascript:void(0);" class\x3d"u-opt u-alter"\x3e\x3ci class\x3d"u-alter-ico"\x3e\x3c/i\x3e\x3cspan class\x3d"tip"\x3e\u7f16\u8f91\x3c/span\x3e\x3c/a\x3e\x3ca href\x3d"javascript:void(0);" class\x3d"u-opt u-delete"\x3e\x3ci class\x3d"u-delete-ico"\x3e\x3c/i\x3e\x3cspan class\x3d"tip"\x3e\u5220\u9664\x3c/span\x3e\x3c/a\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e'):a.next().show(),a.next().find(".txt-q .txt").html(k),a.next().find(".txt-a .txt").html(m),b=!0,a.remove(),$("#addFqaBtn").prop("disabled",!1).removeClass("disabled"))})}var b=!0;(function(){$("#g-bd").on("click","#addFqaBtn",function(){var d=$(this);b&&(b=!1,d.prop("disabled",!0).addClass("disabled"),0<$("#faqList").length||d.parent().before('\x3cul class\x3d"g-faq-lst" id\x3d"faqList"\x3e\x3c/ul\x3e'),$("#faqList").append('\x3cli class\x3d"faq-item"\x3e\x3cdiv class\x3d"m-faq"\x3e\x3cdiv class\x3d"ipt-row" id\x3d"faqIptRow"\x3e\x3cdiv class\x3d"faq-q"\x3e\x3cspan class\x3d"line"\x3e\x3c/span\x3e\x3ci class\x3d"u-faqD-ico"\x3e\u95ee\x3c/i\x3e\x3cdiv class\x3d"m-pbMod-ipt"\x3e\x3cinput type\x3d"text" value\x3d"" placeholder\x3d"\u8bf7\u8f93\u5165\u95ee\u9898" class\x3d"u-pbIpt questionInput"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"faq-a"\x3e\x3ci class\x3d"u-faqU-ico"\x3e\u7b54\x3c/i\x3e\x3cdiv class\x3d"m-pbMod-ipt"\x3e\x3ctextarea name\x3d"" id\x3d"" placeholder\x3d"\u8bf7\u8f93\u5165\u95ee\u9898\u7684\u89e3\u7b54" class\x3d"u-textarea answerInput"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-block"\x3e\x3cbutton type\x3d"button" class\x3d"btn u-inverse-btn u-opt-btn confirmBtn"\x3e\u786e\u5b9a\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn u-inverse-btn u-opt-btn cancelBtn"\x3e\u53d6\u6d88\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e'),d=$("#faqIptRow"),d.find(".u-pbIpt").focus(),a(d,!0),c(d,!0))})})();(function(){$("#g-bd").on("click",".m-faq .u-alter",function(){var d=$(this).parents(".txt-row");questionText=d.find(".txt-q .txt").text();answerText=d.find(".txt-a .txt").text();b=!1;d.hide().before('\x3cdiv class\x3d"ipt-row" id\x3d"faqIptRow"\x3e\x3cdiv class\x3d"faq-q"\x3e\x3cspan class\x3d"line"\x3e\x3c/span\x3e\x3ci class\x3d"u-faqD-ico"\x3e\u95ee\x3c/i\x3e\x3cdiv class\x3d"m-pbMod-ipt"\x3e\x3cinput type\x3d"text" value\x3d"" placeholder\x3d"\u8bf7\u8f93\u5165\u95ee\u9898" class\x3d"u-pbIpt questionInput"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"faq-a"\x3e\x3ci class\x3d"u-faqU-ico"\x3e\u7b54\x3c/i\x3e\x3cdiv class\x3d"m-pbMod-ipt"\x3e\x3ctextarea name\x3d"" id\x3d"" placeholder\x3d"\u8bf7\u8f93\u5165\u95ee\u9898\u7684\u89e3\u7b54" class\x3d"u-textarea answerInput"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-block"\x3e\x3cbutton type\x3d"button" class\x3d"btn u-inverse-btn u-opt-btn confirmBtn"\x3e\u786e\u5b9a\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn u-inverse-btn u-opt-btn cancelBtn"\x3e\u53d6\u6d88\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e');$("#addFqaBtn").prop("disabled",!0).addClass("disabled");d=$("#faqIptRow");d.find(".questionInput").focus().val(questionText);d.find(".answerInput").val(answerText);a(d,!1);c(d,!1)})})()},firefoxDrag:function(a,c){if(0<navigator.userAgent.indexOf("Firefox"))$(a).on("click",c,function(){var a=$(this).val();$(this).val("").focus().val(a)})}};$(function(){courseLearningFn.init()});var courseLearningFn=$(window).courseLearningFn||{},courseLearningFn={init:function(){this.courseCatalog("close")},courseCatalog:function(a,c){var b=null;""==a||"undefined"==a||null==a||void 0==a?b=!0:"open"==a?b=!0:"close"==a?b=!1:"first"==a&&(b="first");$(".g-course-catalog").each(function(a){a=$(this);1==b?(a.find(".m-course-catalog dt").addClass("z-crt"),a.find(".m-course-catalog dd").show()):0==b?(a.find(".m-course-catalog dt").removeClass("z-crt"),a.find(".m-course-catalog dd").hide()):"first"==b&&(a.find(".m-course-catalog dt").removeClass("z-crt"),a.find(".m-course-catalog dd").hide(),console.log(a.first().html()),a.children().first().find(".m-course-catalog dt").addClass("z-crt"),a.children().first().find(".m-course-catalog dd").show())});$(".g-course-catalog").on("click",".m-course-catalog dt",function(a){var b=$(this);e=a||window.event;e.stopPropagation();b.hasClass("z-crt")?b.removeClass("z-crt").nextAll("dd").hide():b.addClass("z-crt").nextAll("dd").show();courseLearningFn.sideFixed()})},sectionCatalog:function(){function a(a,b,c){a.hide();b.removeClass("open");c.removeClass("in");h.show()}function c(a,b){a.parents(b).find(".m-layer-crm span, .m-catalog-crm span").remove();a.parents(b).find(".m-layer-crm .all, .m-catalog-crm .all").removeClass("z-crt");a.parents(b).find(".m-layer-crm, .m-catalog-crm").append('\x3cspan class\x3d"line"\x3e\x26gt;\x3c/span\x3e\x3cspan class\x3d"txt"\x3e'+a.find(".txt").text()+"\x3c/span\x3e")}function b(a){d.on("click",a,function(){var a=$(this);a.hasClass("z-crt")||a.addClass("z-crt").nextAll().remove()})}var d=$("#g-bd"),f=$(".m-sectionLayer-mask"),g=$("#studyCatalogLayer"),h=g.siblings(".closeStudyLayerBtn");d.unbind("click");d.on("click",".showAllSectionBtn",function(b){var c=$(this);e=b||window.event;e.stopPropagation();c.hasClass("in")?a(f,g,c):(f.show(),g.addClass("open"),c.addClass("in"),h.hide())});g.on("click",".closeSectionLayerBtn",function(){a(f,g,$(".showAllSectionBtn"))});g.find(".m-course-catalog .tt-s").on("click",function(){$this=$(this);g.find(".m-course-catalog .tt-s").removeClass("z-crt");$this.addClass("z-crt");a(f,g,$(".showAllSectionBtn"));c($this,".g-studyF-layer");c($this,".g-cl-boxP")});b(".m-layer-crm .all");b(".m-catalog-crm .all")},shrinkInput:function(){$(".m-shrink-ipt .u-textarea").on({focus:function(){$(this).parents(".m-shrink-ipt").addClass("open")},blur:function(){$this=$(this);""==$.trim($this.val())&&$this.val("").parents(".m-shrink-ipt").removeClass("open")}})},sideFixed:function(){var a=$(".g-study-frame"),c=a.children(".g-study-sd"),b=a.children(".g-study-mn"),d=$("#studySelectAct"),f=$(window).height(),g=c.innerHeight(),h=c.offset().top;b.css("min-height",g+"px");if(f>g)$(window).scroll(function(){var b=$(window).scrollTop(),f=b-h;b>=h?(a.addClass("outrange"),c.css("top",f+"px"),d.css("top",f+"px")):(a.removeClass("outrange"),c.css("top",0),d.css("top",0))});else{var l=h+g+180-f;$(window).scroll(function(){var b=$(window).scrollTop(),f=b-h;b>=h?(a.addClass("outrange"),d.css("top",f+"px")):(a.removeClass("outrange"),d.css("top",0));b>l?c.css("top",b-l+"px"):c.css("top",0)})}}};$(document).ready(function(){activityJs.fn.init()});var activityJs=$(window).activityJs||{};activityJs.fn={init:function(){this.set_tag();this.high_options();this.drop_down_box();this.countDown();this.commentOpa(".am-comment-box");this.commentOpa(".am-isComment-box");this.commentShow()},set_tag:function(){$(".am-add-tag").each(function(){var a=$(this);$ipt_parents=a.find(".am-tagipt");$ipt=$ipt_parents.find(".au-ipt");$hint_lst=$ipt_parents.find(".l-slt-lst");$add_btn=a.find(".au-add-tag");$tag_lst=a.find(".am-tag-lst");activityJs.fn.tag_hint_show($ipt,$hint_lst);activityJs.fn.add_tag($ipt,$add_btn,$tag_lst);activityJs.fn.delete_tag($tag_lst)})},tag_hint_show:function(a,c){a.on("focus",function(){""==!$(this).val()&&c.show()});a.on("keyup",function(){""==!$(this).val()?c.show():c.hide()});this.tag_hint_hide(a,c)},tag_hint_hide:function(a,c){$(document).on("click",function(b){b=$(b.target);0==b.closest(c).length&&0==b.closest(a).length&&c.hide()});c.on("click","a",function(){c.hide();a.val($(this).text())})},add_tag:function(a,c,b){c.on("click",function(){var c=!1,f=b.children().length;if(""!=a.val()){for(var g=0;g<f;g++)a.val()==b.children().eq(g).find(".txt").text()&&(alert("\u5df2\u6709\u76f8\u540c\u6807\u7b7e"),a.val(""),a.focus(),c=!0);c||(b.append('\x3cli\x3e\x3cspan class\x3d"txt"\x3e'+a.val()+'\x3c/span\x3e\x3ca href\x3d"javascript:void(0);" class\x3d"dlt" title\x3d"\u5220\u9664\u6807\u7b7e"\x3e\u00d7\x3c/a\x3e\x3c/li\x3e'),a.val(""))}})},delete_tag:function(a){a.on("click",".dlt",function(){$(this).parent().remove()})},high_options:function(){var a=$(".ag-high-options"),c=a.find(".au-high-option"),b=a.find(".ag-high-lst");c.on("click",function(){_ts=$(this);_ts.hasClass("z-crt")?(_ts.removeClass("z-crt"),b.hide()):(_ts.addClass("z-crt"),b.show())})},drop_down_box:function(){$(".am-slt-lst").each(function(){var a=$(this),c=a.children(".show"),b=c.children(".txt"),d=a.children(".lst");d.children("a");c.on("click",function(){var f=$(this);f.hasClass("z-crt")?(d.hide(),f.removeClass("z-crt")):(d.show(),f.addClass("z-crt"));$(document).on("click",function(b){0==$(b.target).closest(a).length&&(d.hide(),c.removeClass("z-crt"))});a.on("click",".lst a",function(){d.hide();c.removeClass("z-crt");b.text($(this).text());$(this).addClass("z-crt").siblings().removeClass("z-crt")})})})},countDown:function(){var a=$(".am-count-down"),c=a.find(".endTime"),b=a.find(".day"),d=a.find(".hour"),f=a.find(".minute"),g=a.find(".second"),h=new Date(c.val()),a=new Date,a=parseInt((h.getTime()-a.getTime())/1E3),c=parseInt(a/86400),l=parseInt(a/3600%24),k=parseInt(a/60%60),m=parseInt(a%60);b.text(c);d.text(l);f.text(k);g.text(m);10>c&&b.text("0"+c);10>l&&d.text("0"+l);10>k&&f.text("0"+k);10>m&&g.text("0"+m);1>a&&(clearTimeout(n),b.text("00"),d.text("00"),f.text("00"),g.text("00"));var n=setInterval(function(){var a=new Date,a=parseInt((h.getTime()-a.getTime())/1E3),c=parseInt(a/86400),k=parseInt(a/3600%24),l=parseInt(a/60%60),m=parseInt(a%60);b.text(c);d.text(k);f.text(l);g.text(m);10>c&&b.text("0"+c);10>k&&d.text("0"+k);10>l&&f.text("0"+l);10>m&&g.text("0"+m);1>a&&(clearTimeout(n),b.text("00"),d.text("00"),f.text("00"),g.text("00"))},1E3)},commentOpa:function(a){$(a+" .au-textarea").on("focus",function(){var c=$(this),b=c.parents(a),d=b.find(".comment-placeholder"),f=b.find(".am-cmtBtn-block");b.find(".au-face");b.find(".au-cmtPublish-btn");d.stop().animate({opacity:"0"},200,function(){$(this).hide()});c.stop().animate({height:"76px"},200,function(){f.show()});$(document).on("click",function(b){0==$(b.target).closest(a).length&&""==c.val()&&(d.stop().animate({opacity:"1"},200,function(){$(this).show()}),c.stop().animate({height:"22px"},100,function(){f.hide()}))})})},commentShow:function(){var a=$(".ag-cmt-lst-p").children("li"),c=a.find(".au-comment"),b=a.find(".ag-is-comment");a.each(function(){var a=$(this),f=a.find(".au-comment"),g=a.find(".ag-is-comment");g.innerHeight();f.on("click",function(){var a=$(this);a.hasClass("z-crt")?(a.removeClass("z-crt"),g.hide()):(b.hide(),c.removeClass("z-crt"),a.addClass("z-crt"),g.find(".au-comment-trg").css("left",Math.ceil(a.position().left)-25),g.show())})})},aJumpLayer:function(a){a=$(a);var c=a.innerWidth(),b=a.innerHeight();a.show().css({"margin-top":-b/2+"px","margin-left":-c/2+"px"});$(".ag-blackbg").show().css("opacity","0.5");a.find(".au-confirm-btn").bind("click",function(){a.hide();$(".ag-blackbg").hide().css("opacity","1")});a.find(".au-cancel-btn").bind("click",function(){a.hide();$(".ag-blackbg").hide().css("opacity","1")});a.find(".au-close-btn").bind("click",function(){a.hide();$(".ag-blackbg").hide().css("opacity","1")})},openABlayer:function(a){a=$(a);var c=$(".ag-whitebg"),b=$(window).scrollTop();a.show().css("top",b+100+"px");c.show();this.closeABlayer(a,c)},closeABlayer:function(a,c){var b=a.find(".au-closelayer-ico"),d=a.find(".au-cancel-btm");b.on("click",function(){a.hide();c.hide()});d.on("click",function(){a.hide();c.hide()})}};$.fn.extend({myTab:function(a){a=$.extend({pars:".myTab",tabNav:".tabNav",li:"li",tabCon:".tabCon",tabList:".tabList",cur:"cur",eType:"click",page:0},a);var c=$(this),b=c.find(a.tabNav).find(a.li);tabList=c.find(a.tabCon).find(a.tabList);this.each(function(){b.removeClass(a.cur);b.eq(a.page).addClass(a.cur);tabList.hide();tabList.eq(a.page).show();b.eq(a.page).show();b.on(a.eType,function(){var b=$(this).parents(a.tabNav).find(a.li).index(this);$(this).addClass(a.cur).siblings().removeClass(a.cur);$(this).parents(a.pars).find(a.tabCon).find(a.tabList).eq(b).css({display:"block"}).siblings().css({display:"none"})})});return this}});$(document).ready(function(){activityFile.fn.init()});var activityFile=$(window).activityFile||{};activityFile.fn={init:function(){this.show_file_opa();this.file_type();this.prepare_add_folder("#activityLessonFile");this.prepare_file_rename()},show_file_opa:function(a){var c=".am-file-lst";""!=a&&"undefined"!=a&&null!=a&&void 0!=a&&(c=a);$(c).on("mouseenter",".am-file-block",function(){var a=$(this),c=a.find(".f-opa"),f=a.find(".f-info");0!=a.find(".rename-box").length?(c.hide(),f.hide()):($(this).find(".f-opa").show(),$(this).find(".f-info").hide())});$(c).on("mouseleave",".am-file-block",function(){var a=$(this),c=a.find(".f-opa"),f=a.find(".f-info");0!=a.find(".rename-box").length?(c.hide(),f.hide()):(c.hide(),f.show())})},file_type:function(){$(".am-file-block").each(function(){var a=$(this),c=a.find(".f-name"),a=a.find(".file-view").children(),b=c.find("span").text().split("."),c=b.length,b=b[c-1];1!=c&&("doc"==b||"docx"==b?a.removeClass().addClass("au-file-word"):"xls"==b||"xlsx"==b?a.removeClass().addClass("au-file-excel"):"ppt"==b||"pptx"==b?a.removeClass().addClass("au-file-ppt"):"pdf"==b?a.removeClass().addClass("au-file-pdf"):"txt"==b?a.removeClass().addClass("au-file-txt"):"jpg"==b||"jpeg"==b||"png"==b||"gif"==b?a.removeClass().addClass("au-file-pic"):"mp3"==b||"mp4"==b||"avi"==b||"rmvb"==b||"rm"==b||"asf"==b||"divx"==b||"mpg"==b||"mpeg"==b||"mpe"==b||"wmv"==b||"mkv"==b||"vob"==b||"3gp"==b?a.removeClass().addClass("au-file-video"):a.removeClass().addClass("au-file-other"))})},prepare_add_folder:function(a){var c=document,b=".am-file-lst",d=!0;""!=a&&"undefined"!=a&&null!=a&&void 0!=a&&(c=a,b=a+" "+b);$(c).on("click",".au-add-folder",function(){if(d){d=!1;$(b).prepend('\x3cli id\x3d"theNewFolder"\x3e\x3cdiv class\x3d"am-file-block am-file-folder"\x3e\x3cdiv class\x3d"file-view"\x3e\x3cdiv class\x3d"au-folder"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"add-rename-box" style\x3d"display: block"\x3e\x3cinput type\x3d"text" value\x3d"" class\x3d"rename-ipt"\x3e\x3cdiv\x3e\x3ca href\x3d"javascript:void(0);" class\x3d"confirm"\x3e\u521b\u5efa\x3c/a\x3e\x3ca href\x3d"javascript:void(0);" class\x3d"cancel"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e');var a=$("#theNewFolder"),c=a.find(".add-rename-box"),h=c.find(".rename-ipt"),l=c.find(".confirm"),c=c.find(".cancel");h.focus().val("\u65b0\u5efa\u6587\u4ef6\u5939");c.on("click",function(){a.remove();d=!0});l.on("click",function(){if(""==h.val())alert("\u6587\u4ef6\u5939\u540d\u5b57\u4e0d\u80fd\u4e3a\u7a7a"),h.focus();else{d=!0;var b=$(this).parents(".add-rename-box");b.before('\x3cb class\x3d"f-name"\x3e\x3cspan\x3e'+h.val()+'\x3c/span\x3e\x3cem\x3e(0)\x3c/em\x3e\x3c/b\x3e\x3cdiv class\x3d"f-opa"\x3e\x3ca href\x3d"javascript:void(0);" class\x3d"open"\x3e\u6253\u5f00\x3c/a\x3e\x3ca href\x3d"javascript:void(0);" class\x3d"download"\x3e\u4e0b\u8f7d\x3c/a\x3e\x3ca href\x3d"javascript:void(0);" class\x3d"rename"\x3e\u91cd\u547d\u540d\x3c/a\x3e\x3ca href\x3d"javascript:void(0);" class\x3d"delete"\x3e\u5220\u9664\x3c/a\x3e\x3c/div\x3e');b.prevAll(".f-opa").show();b.remove();a.attr("id","")}})}})},prepare_file_rename:function(a){var c=".am-file-block .rename";""!=a&&"undefined"!=a&&null!=a&&void 0!=a&&(c=a+" "+c);$(document).off("click",c).on("click",c,function(){var a=$(this),c=a.parents(".am-file-block"),f=c.parents(".am-file-lst").find(".am-file-block"),g=c.find(".f-name");c.find(".f-info");var h=a.parent(),a=g.find("span").text(),l=a.split("."),k=l[l.length-1];f.find(".rename-box").remove();f.find(".f-name").show();g.hide();h.hide().after('\x3cdiv class\x3d"rename-box"\x3e\x3cinput type\x3d"text" class\x3d"rename-ipt"\x3e\x3cdiv\x3e\x3ca href\x3d"javascript:void(0);" class\x3d"confirm"\x3e\u786e\u5b9a\x3c/a\x3e\x3ca href\x3d"javascript:void(0);" class\x3d"cancel"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');var m=c.find(".rename-box"),n=c.find(".rename-ipt"),f=c.find(".confirm"),c=c.find(".cancel");n.val(a.split(".")[0]).focus();f.off().on("click",function(){""==n.val()?(alert("\u6587\u4ef6\u540d\u4e0d\u80fd\u4e3a\u7a7a"),n.focus()):(g.show().children("span").text(n.val()),1==l.length?g.show().children("span").text(n.val()):g.show().children("span").text(n.val()+"."+k),h.show(),m.remove())});c.off().on("click",function(){g.show();h.show();m.remove()})})}};var addTopicFn=$(window).addTopicFn||{},addTopicFn={includeParent:$("body"),topicType:{single:"single",multiples:"multiple",rightAndWrong:"rightAndWrong",essayQuestion:"essayQuestion",blankQuestion:"blankQuestion"},init:function(a){""!=a&&void 0!=a&&"undefined"!=a&&null!=a&&(this.includeParent=a);this.lastAdd();this.afterAdd();this.alter();this.deleteTopic();this.arrange()},lastAdd:function(){ifFirstClick=!0;var a=$("#topicListBox");addTopicFn.includeParent.on("click",".m-addTopic-opt a",function(){var c=$(this),b=c.parents(".m-addTopic-opt");$("#topicListBox").sortable("disable");ifFirstClick&&b.addClass("isntFirst");ifFirstClick=!1;addTopicFn.addType(c,a,"append")})},afterAdd:function(){this.includeParent.on("click",".m-topic-module .nextAddNew a",function(){$(this);var a=$(this).parents(".topic-item");$("#topicListBox").sortable("disable");addTopicFn.addType($(this),a,"after")})},addType:function(a,c,b){var d=$("#topicListBox").children(".optState");1<=d.length&&d.remove();a.hasClass("u-addTopic-single")?addTopicFn.add(c,b,"new","#singleChoiceBox"):a.hasClass("u-addTopic-multiple")?addTopicFn.add(c,b,"new","#multipleChoiceBox"):a.hasClass("u-addTopic-rw")?addTopicFn.add(c,b,"new","#rightAndWrongBox"):a.hasClass("u-addTopic-qa")?addTopicFn.add(c,b,"new","#essayQuestionBox"):a.hasClass("u-addTopic-bl")?addTopicFn.add(c,b,"new","#blankQuestionBox"):a.hasClass("u-addTopic-import")&&addTopicFn.add(c,b,"new","#importTextarea");$(".m-radio-tick input,.m-checkbox-tick input").bindCheckboxRadioSimulate()},add:function(a,c,b,d){"append"==c?(a.append($(d).clone()),a.children().last().show().prop("id","newAddTopicBox").attr("data-opt",b).addClass("optState").find(".title-input").focus()):"after"==c&&(a.after($(d).clone()),a.next().show().prop("id","newAddTopicBox").addClass("optState").attr("data-opt",b).find(".title-input").focus());$("#newAddTopicBox .m-addtopicQ-lst").sortable({placeholder:"ui-state-highlight",items:".m-addTopic-q",opacity:.6,containment:"#newAddTopicBox",stop:function(){for(var a=$("#newAddTopicBox .m-addTopic-q"),c=a.length,b=0;b<c;b++)a.eq(b).find(".m-pbMod-ipt .u-pbIpt").prop("placeholder","\u9009\u9879"+(b+1)),a.eq(b).find(".m-pbMod-ipt .u-pbIpt-an").prop("placeholder","\u7b54\u6848"+(b+1))}}).disableSelection();addCourseFn.firefoxDrag("#questionnaireWrap","#newAddTopicBox .m-pbMod-ipt .u-pbIpt");addCourseFn.firefoxDrag("#questionnaireWrap","#newAddTopicBox .m-addTopic-q .m-pbMod-ipt .u-pbIpt");addCourseFn.firefoxDrag("#questionnaireWrap",".m-pbMod-ipt .u-textarea");addTopicFn.cancel();addTopicFn.opreation()},alter:function(){function a(a){var c=$("#newAddTopicBox").find(".m-addtopicQ-lst"),f=c.children();a=a.length;var g=f.length;if(a>g)for(f=0;f<a-g;f++)c.append(c.children().last().clone()),c.children().eq(g+f).find(".m-pbMod-ipt .u-pbIpt").prop("placeholder","\u9009\u9879"+(g+f+1)),c.children().eq(g+f).find(".m-pbMod-ipt .u-pbIpt-an").prop("placeholder","\u7b54\u6848"+(g+f+1));else a<g&&f.eq(a-1).nextAll().remove()}function c(a){var c=$("#newAddTopicBox").find(".m-addtopicQ-lst").children();c.each(function(f){var g=a.eq(f).find(".aItemTxt").html(),h=a.eq(f).find("label input");c.eq(f).find(".m-pbMod-ipt .u-pbIpt").val(g);h.prop("checked")&&c.eq(f).find("label input").prop("checked",!0)})}this.includeParent.on("click",".m-topic-module .btn-block .alter",function(){var b=$(this).parents(".topic-item"),d=b.attr("data-type"),f=b.find(".topicTitle").text(),g=b.find(".m-question-lst").children();questionId=b.find(".questionId").val();maxChoose=b.find(".maxChoose").val();var h=$("#topicListBox").children(".optState");1<=h.length&&h.remove();$("#topicListBox").sortable("disable");b.hide().siblings(".topic-item").show();d==addTopicFn.topicType.single?(addTopicFn.add(b,"after","alter","#singleChoiceBox"),a(g),c(g)):d==addTopicFn.topicType.multiples?(addTopicFn.add(b,"after","alter","#multipleChoiceBox"),a(g),c(g)):d==addTopicFn.topicType.rightAndWrong?(addTopicFn.add(b,"after","alter","#rightAndWrongBox"),c(g)):d==addTopicFn.topicType.essayQuestion?(addTopicFn.add(b,"after","alter","#essayQuestionBox"),g=$("#newAddTopicBox"),d=$.trim(b.find(".minSizeNumber").text()),b=$.trim(b.find(".maxSizeNumber").text()),h=g.find(".minSizeNumber"),g=g.find(".maxSizeNumber"),"\u4e0d\u9650"==d?h.val(""):h.val(d),"\u4e0d\u9650"==b?g.val(""):g.val(b)):d==addTopicFn.topicType.blankQuestion&&(addTopicFn.add(b,"after","alter","#blankQuestionBox"),a(g),c(g));$(".m-radio-tick input,.m-checkbox-tick input").bindCheckboxRadioSimulate();$("#newAddTopicBox").find(".title-input").text(f);$("#newAddTopicBox").find(".questionId").val(questionId);$("#newAddTopicBox").find(".maxChoose").val(maxChoose)})},deleteTopic:function(){this.includeParent.on("click",".m-topic-module .btn-block .delete",function(){var a=$(this).parents(".topic-item"),c=$(this).closest("li").find(".questionId").eq(0).val();confirm("\u60a8\u786e\u5b9a\u8981\u5220\u9664\u6b64\u9053\u9898\u76ee\u5417",function(){$.post("make/survey/question",{_method:"DELETE",id:c},function(c){"00"==c.responseCode?(a.remove(),addTopicFn.arrange()):alert("\u5220\u9664\u5931\u8d25")})})})},cancel:function(){$("#topicListBox").on("click",".m-addTopic-module .t-opt .delete",function(){var a=$(this).parents(".clone-item");"alter"==a.attr("data-opt")&&a.prev().show();a.remove();$("#topicListBox").sortable("enable")})},opreation:function(){var a=$(".m-addTopic-module");(function(){a.on("click",".addQuestionButton",function(){var a=$(this).parent().prevAll(".m-addtopicQ-lst"),b=a.children().last(),d=a.children().length;a.append(b.clone());$new_last_item=a.children().last();$new_last_item.find(".m-checkbox-tick input").prop("checked",!1);$new_last_item.find(".m-pbMod-ipt .u-pbIpt").val("").prop("placeholder","\u9009\u9879"+(d+1));$new_last_item.find(".m-pbMod-ipt .u-pbIpt-an").val("").prop("placeholder","\u7b54\u6848"+(d+1));$(".m-radio-tick input,.m-checkbox-tick input").bindCheckboxRadioSimulate()})})();(function(){a.on("click",".m-addTopic-q .u-delete",function(){var a=$(this),b=a.parents(".m-addTopic-q"),a=a.parents(".m-addtopicQ-lst").children(),d=a.index(b),f=a.length;if(2<f){for(;d<f;d++)a.eq(d+1).find(".m-pbMod-ipt .u-pbIpt").prop("placeholder","\u9009\u9879"+(d+1)),a.eq(d+1).find(".m-pbMod-ipt .u-pbIpt-an").prop("placeholder","\u7b54\u6848"+(d+1));b.remove()}else alert("\u9009\u9879\u5217\u8868\u4e0d\u80fd\u5c11\u4e8e2\u4e2a")})})()},confirm:function(){$("#newAddTopicBox").off().on("click",".t-opt .confirm, .confirm-line",function(a){var c=$(this),b=c.parents("#newAddTopicBox"),d=b.attr("data-type"),f=$.trim(b.find(".title-input").val());questionId=c.closest("form").find(".questionId").val();e=a||window.event;e.stopPropagation();var g,h,l,k,m;$("#cloneWrap").children(".topic-item").each(function(){var a=$(this).attr("data-type");a==addTopicFn.topicType.single?g=$(this).clone():a==addTopicFn.topicType.multiples?h=$(this).clone():a==addTopicFn.topicType.rightAndWrong?l=$(this).clone():a==addTopicFn.topicType.essayQuestion?k=$(this).clone():a==addTopicFn.topicType.blankQuestion&&(m=$(this).clone())});""==f?alert("\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a"):("new"==b.attr("data-opt")?d==addTopicFn.topicType.single?b.before(g):d==addTopicFn.topicType.multiples?b.before(h):d==addTopicFn.topicType.rightAndWrong?b.before(l):d==addTopicFn.topicType.essayQuestion?b.before(k):d==addTopicFn.topicType.blankQuestion&&b.before(m):"alter"==b.attr("data-opt")&&b.prev().show(),b.prev().find(".topicTitle").html(f),b.prev().find(".questionId").val(questionId),addTopicFn.Confirm_fn(b),b.remove(),addTopicFn.arrange(),$("#topicListBox").sortable("enable"))})},Confirm_fn:function(a){var c=a.prev();(function(){var b=a.find(".m-addtopicQ-lst").children(),d=c.find(".m-question-lst").children(),b=b.length,f=d.length;if(b>f)for(var g=0;g<b-f;g++)d.last().before(d.last().clone());else b<f&&d.eq(b-1).nextAll().remove()})();(function(){var b=a.find(".m-addtopicQ-lst").children(),d=c.find(".m-question-lst").children(),f="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");b.each(function(a){var c=b.eq(a).find("label input"),l=b.eq(a).find(".m-pbMod-ipt .u-pbIpt");d.eq(a).find("label input").prop("checked",!1);1==c.prop("checked")&&d.eq(a).find("label input").prop("checked",!0);""==$.trim(l.val())?d.eq(a).find(".aItemTxt").html(l.prop("placeholder")):d.eq(a).find(".aItemTxt").html(l.val());d.eq(a).find(".aItemNum").html(f[a]+"\u3001")});$(".m-radio-tick input,.m-checkbox-tick input").bindCheckboxRadioSimulate()})();(function(){var b=$.trim(a.find(".minSizeNumber").val()),d=$.trim(a.find(".maxSizeNumber").val()),f=c.find(".minSizeNumber"),g=c.find(".maxSizeNumber");""==b?f.html("\u4e0d\u9650"):f.html(b);""==d?g.html("\u4e0d\u9650"):g.html(d)})()},arrange:function(){addTopicFn.includeParent.find(".g-topicList").children().each(function(a){$(this).find(".serial-number").html(a+1+"\u3001")})}},addTestQuestionFn=$(window).addTestQuestionFn||{},addTestQuestionFn={includeParent:$("body"),topicType:{single:"single",multiples:"multiple",trueFalse:"trueFalse",essayQuestion:"essayQuestion",blankQuestion:"blankQuestion"},init:function(a){""!=a&&void 0!=a&&"undefined"!=a&&null!=a&&(this.includeParent=a);this.lastAdd();this.afterAdd();this.alter();this.deleteTopic();this.arrange()},lastAdd:function(){ifFirstClick=!0;var a=$("#topicListBox");addTestQuestionFn.includeParent.on("click",".m-addTopic-opt a",function(){var c=$(this),b=c.parents(".m-addTopic-opt");$("#topicListBox").sortable("disable");ifFirstClick&&b.addClass("isntFirst");ifFirstClick=!1;addTestQuestionFn.addType(c,a,"append")})},afterAdd:function(){this.includeParent.on("click",".m-topic-module .nextAddNew a",function(){$(this);var a=$(this).parents(".topic-item");$("#topicListBox").sortable("disable");addTestQuestionFn.addType($(this),a,"after")})},addType:function(a,c,b){var d={single:"u-addTopic-single",multiples:"u-addTopic-multiple",trueFalse:"u-addTopic-rw",blankQuestion:"u-addTopic-bl",importText:"u-addTopic-import"},f=$("#topicListBox").children(".optState");1<=f.length&&f.remove();a.hasClass(d.single)?addTestQuestionFn.add(c,b,"new","#singleChoiceBox"):a.hasClass(d.multiples)?addTestQuestionFn.add(c,b,"new","#multipleChoiceBox"):a.hasClass(d.trueFalse)?addTestQuestionFn.add(c,b,"new","#trueFalseBox"):a.hasClass(d.essayQuestion)?addTestQuestionFn.add(c,b,"new","#essayQuestionBox"):a.hasClass(d.blankQuestion)?addTestQuestionFn.add(c,b,"new","#blankQuestionBox"):a.hasClass(d.importText)&&addTopicFn.add(c,b,"new","#importTextarea");$(".m-radio-tick input,.m-checkbox-tick input").bindCheckboxRadioSimulate()},add:function(a,c,b,d){"append"==c?(a.append($(d).clone()),a.children().last().show().prop("id","newAddTopicBox").attr("data-opt",b).addClass("optState").find(".title-input").focus()):"after"==c&&(a.after($(d).clone()),a.next().show().prop("id","newAddTopicBox").addClass("optState").attr("data-opt",b).find(".title-input").focus());$("#newAddTopicBox .m-addtopicQ-lst").sortable({placeholder:"ui-state-highlight",items:".m-addTopic-q",opacity:.6,containment:"#newAddTopicBox",stop:function(){for(var a=$("#newAddTopicBox .m-addTopic-q"),c=a.length,b=0;b<c;b++)a.eq(b).find(".m-pbMod-ipt .u-pbIpt").prop("placeholder","\u9009\u9879"+(b+1)),a.eq(b).find(".m-pbMod-ipt .u-pbIpt-an").prop("placeholder","\u7b54\u6848"+(b+1))}}).disableSelection();addCourseFn.firefoxDrag("#Test-questionnaireWrap","#newAddTopicBox .m-addTopic-q .m-pbMod-ipt .u-pbIpt");addCourseFn.firefoxDrag(".g-addTopic-wrap",".m-pbMod-ipt .u-textarea");addCourseFn.firefoxDrag(".g-addTopic-wrap",".m-ans-fb-desc .m-ans-fb-desc-inp");addCourseFn.firefoxDrag(".g-addTopic-wrap",".m-ans-fb-tl .m-ans-fb-tl-inp");addTestQuestionFn.cancel();addTestQuestionFn.opreation()},alter:function(){function a(a){var c=$("#newAddTopicBox").find(".m-addtopicQ-lst"),b=c.children();a=a.length;var h=b.length;if(a>h)for(b=0;b<a-h;b++)c.append(c.children().last().clone()),c.children().eq(h+b).find(".m-pbMod-ipt .u-pbIpt").prop("placeholder","\u9009\u9879"+(h+b+1)),c.children().eq(h+b).find(".m-pbMod-ipt .u-pbIpt-an").prop("placeholder","\u7b54\u6848"+(h+b+1));else a<h&&b.eq(a-1).nextAll().remove()}function c(a){var c=$("#newAddTopicBox").find(".m-addtopicQ-lst").children();c.each(function(b){var h=a.eq(b).find(".aItemTxt").html(),l=a.eq(b).find("label input");c.eq(b).find(".m-pbMod-ipt .u-pbIpt").val(h);l.prop("checked")&&c.eq(b).find("label input").prop("checked",!0)})}function b(a){var c=$("#newAddTopicBox"),b=$.trim(a.find(".minSizeNumber").text());a=$.trim(a.find(".maxSizeNumber").text());var h=c.find(".minSizeNumber"),c=c.find(".maxSizeNumber");"\u4e0d\u9650"==b?h.val(""):h.val(b);"\u4e0d\u9650"==a?c.val(""):c.val(a)}this.includeParent.on("click",".m-topic-module .btn-block .alter",function(){var d=$(this).parents(".topic-item"),f=d.attr("data-type"),g=d.find(".topicTitle").text(),h=d.find(".score").val(),l=d.find(".correctFeedback").val(),k=d.find(".incorrectFeedback").val(),m=d.find(".m-question-lst").children();questionId=d.find(".questionId").val();var n=$("#topicListBox").children(".optState");1<=n.length&&(confirm("\u60a8\u6709\u4e00\u9053\u9898\u76ee\u6b63\u5728\u7f16\u8f91\u4e2d\uff0c\u662f\u5426\u4fdd\u5b58\u6b63\u5728\u7f16\u8f91\u7684\u9898\u76ee\uff1f"),n.remove());$("#topicListBox").sortable("disable");d.hide().siblings(".topic-item").show();if(f==addTestQuestionFn.topicType.single){addTestQuestionFn.add(d,"after","alter","#singleChoiceBox");a(m);c(m);var p=d.find('input:radio[name\x3d"correctOption"]:checked').val();$.each($("#newAddTopicBox").find("input:radio[name\x3d'correctOption']"),function(a,c){a==p&&$(c).attr("checked","checked");$(c).val(a)})}else f==addTestQuestionFn.topicType.multiples?(addTestQuestionFn.add(d,"after","alter","#multipleChoiceBox"),a(m),c(m)):f==addTestQuestionFn.topicType.trueFalse?(addTestQuestionFn.add(d,"after","alter","#trueFalseBox"),c(m)):f==addTestQuestionFn.topicType.essayQuestion?(addTestQuestionFn.add(d,"after","alter","#essayQuestionBox"),b(d)):f==addTestQuestionFn.topicType.blankQuestion&&(addTestQuestionFn.add(d,"after","alter","#blankQuestionBox"),a(m),c(m));$(".m-radio-tick input,.m-checkbox-tick input").bindCheckboxRadioSimulate();$("#newAddTopicBox").find(".title-input").text(g);$("#newAddTopicBox").find(".m-addtext-score-in").val(h);$("#newAddTopicBox").find(".questionId").val(questionId);$("#newAddTopicBox").find("textarea[name\x3d'correctFeedback']").text(l);$("#newAddTopicBox").find("textarea[name\x3d'incorrectFeedback']").text(k)})},deleteTopic:function(){this.includeParent.on("click",".m-topic-module .btn-block .delete",function(){var a=$(this).parents(".topic-item"),c=$(this).closest("li").find(".questionId").eq(0).val(),b=$("input#testId").val(),d="P1:S1:Q"+$(this).closest("li").prevAll().length;c&&confirm("\u60a8\u786e\u5b9a\u8981\u5220\u9664\u6b64\u9053\u9898\u76ee\u5417",function(){$.post("make/test/"+b+"/removeQuestion",{_method:"DELETE",questionFormKey:d},function(c){"00"==c.responseCode?(a.remove(),addTestQuestionFn.arrange()):alert("\u5220\u9664\u5931\u8d25")})})})},cancel:function(){$("#topicListBox").on("click",".m-addTopic-module .t-opt .delete",function(){var a=$(this).parents(".clone-item");"alter"==a.attr("data-opt")&&a.prev().show();a.remove();$("#topicListBox").sortable("enable")})},opreation:function(){var a=$(".m-addTopic-module");(function(){a.on("click",".addQuestionButton",function(){var a=$(this).parent().prevAll(".m-addtopicQ-lst"),b=a.children().last(),d=a.children().length;a.append(b.clone());$new_last_item=a.children().last();$new_last_item.find(".m-checkbox-tick input").prop("checked",!1);a=$new_last_item.find(".m-pbMod-ipt .u-pbIpt");a=a.attr("name").substring(0,a.attr("name").length-1);$new_last_item.find(".m-pbMod-ipt .u-pbIpt").val("").prop("placeholder","\u9009\u9879"+(d+1)).attr("name",a+(d+1));$new_last_item.find(".m-pbMod-ipt .u-pbIpt-an").val("").prop("placeholder","\u7b54\u6848"+(d+1));$(".m-radio-tick input,.m-checkbox-tick input").bindCheckboxRadioSimulate()})})();(function(){a.on("click",".m-addTopic-q .u-delete",function(){var a=$(this),b=a.parents(".m-addTopic-q"),a=a.parents(".m-addtopicQ-lst").children(),d=a.index(b),f=a.length;if(2<f){for(;d<f;d++)a.eq(d+1).find(".m-pbMod-ipt .u-pbIpt").prop("placeholder","\u9009\u9879"+(d+1)),a.eq(d+1).find(".m-pbMod-ipt .u-pbIpt-an").prop("placeholder","\u7b54\u6848"+(d+1));b.remove()}else alert("\u9009\u9879\u5217\u8868\u4e0d\u80fd\u5c11\u4e8e2\u4e2a")})})()},confirm:function(){$("#newAddTopicBox").off().on("click",".t-opt .confirm, .confirm-line",function(a){var c=$(this).parents("#newAddTopicBox"),b=c.attr("data-type"),d=$.trim(c.find(".title-input").val());questionId=$.trim(c.find(".questionId").val());correctFeedback=$.trim(c.find("textarea[name\x3dcorrectFeedback]").val());incorrectFeedback=$.trim(c.find("textarea[name\x3dincorrectFeedback]").val());score=$.trim(c.find("input[name\x3dscore]").val());e=a||window.event;e.stopPropagation();var f,g,h,l,k;$("#cloneWrap").children(".topic-item").each(function(){var a=$(this).attr("data-type");a==addTestQuestionFn.topicType.single?(f=$(this).clone(),f.find("input").attr("name","single"+($('.question[data-type\x3d"single"]').size()+1))):a==addTestQuestionFn.topicType.multiples?g=$(this).clone():a==addTestQuestionFn.topicType.trueFalse?h=$(this).clone():a==addTestQuestionFn.topicType.essayQuestion?l=$(this).clone():a==addTestQuestionFn.topicType.blankQuestion&&(k=$(this).clone())});""==d?alert("\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a"):("new"==c.attr("data-opt")?b==addTestQuestionFn.topicType.single?c.before(f):b==addTestQuestionFn.topicType.multiples?c.before(g):b==addTestQuestionFn.topicType.trueFalse?c.before(h):b==addTestQuestionFn.topicType.essayQuestion?c.before(l):b==addTestQuestionFn.topicType.blankQuestion&&c.before(k):"alter"==c.attr("data-opt")&&c.prev().show(),c.prev().find(".topicTitle").html(d),c.prev().find(".correctFeedback").val(correctFeedback),c.prev().find(".incorrectFeedback").val(incorrectFeedback),c.prev().find(".score").val(score),c.prev().find(".questionId").val(questionId),addTestQuestionFn.Confirm_fn(c),c.remove(),addTestQuestionFn.arrange(),$("#topicListBox").sortable("enable"))})},Confirm_fn:function(a){var c=a.prev();(function(){var b=a.find(".m-addtopicQ-lst").children(),d=c.find(".m-question-lst").children(),b=b.length,f=d.length;if(b>f)for(var g=0;g<b-f;g++)d.last().before(d.last().clone());else b<f&&d.eq(b-1).nextAll().remove()})();(function(){var b=a.find(".m-addtopicQ-lst").children(),d=c.find(".m-question-lst").children(),f="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");b.each(function(a){var c=b.eq(a).find("label input"),l=b.eq(a).find(".m-pbMod-ipt .u-pbIpt");d.eq(a).find("label input").prop("checked",!1);1==c.prop("checked")&&d.eq(a).find("label input").prop("checked",!0);""==$.trim(l.val())?d.eq(a).find(".aItemTxt").html(l.prop("placeholder")):d.eq(a).find(".aItemTxt").html(l.val());d.eq(a).find(".aItemNum").html(f[a]+"\u3001")});$(".m-radio-tick input,.m-checkbox-tick input").bindCheckboxRadioSimulate()})();(function(){var b=$.trim(a.find(".minSizeNumber").val()),d=$.trim(a.find(".maxSizeNumber").val()),f=c.find(".minSizeNumber"),g=c.find(".maxSizeNumber");""==b?f.html("\u4e0d\u9650"):f.html(b);""==d?g.html("\u4e0d\u9650"):g.html(d)})()},arrange:function(){addTestQuestionFn.includeParent.find(".g-topicList").children().each(function(a){$(this).find(".serial-number").html(a+1+"\u3001")})}};(function(a){function c(c,f){this.element=c;this.options=a.extend({},b,f);this._defaults=b;this._name="evaluateStar";this.init()}var b={starName:".star",inClassName:"z-in",crtClassName:"z-crt"};c.prototype.init=function(){var b=this,c=a(this.element),g=this.options.starName,h=this.options.inClassName,l=this.options.crtClassName;c.find(g).on({mouseenter:function(){var c=a(this),f=c.parent().children(g),c=f.index(c);b.addStar(f,c,h)},click:function(){var c=a(this),f=c.parent().children(g),c=f.index(c);b.addStar(f,c,l);var f=a(".starBtn").length,c=a(".starBtn.z-crt").length,h=parseFloat(a("#maxScore").text());a("#totalScore").text((c/f*h).toFixed(1))}});c.on("mouseleave",function(){$star=a(this).find(g);$star.removeClass(h)})};c.prototype.addStar=function(a,c,b){a.removeClass(b);for(var h=0;h<=c;h++)a.eq(h).addClass(b)};a.fn.evaluateStar=function(b){return this.each(function(){a.data(this,"plugin_evaluateStar")||a.data(this,"plugin_evaluateStar",new c(this,b))})}})(jQuery);var studySelectAct=$(window).studySelectAct||{},studySelectAct={star:function(a){function c(a){a>=p-3?m.addClass("disabled"):m.removeClass("disabled");0==a?n.addClass("disabled"):n.removeClass("disabled")}function b(a){h.removeClass("z-crt");h.eq(a).addClass("z-crt");k.removeClass("z-crt");k.eq(a).addClass("z-crt")}function d(a){var c;c=f<p-2?-q*f:-q*(f-1);a?l.stop().animate({left:c},300):l.css("left",c+"px")}var f=0,g=$("#studySelectAct"),h=g.children(".dd-box").find(".t-list li"),l=g.find(".m-studyAct-lst"),k=l.children(),m=g.find(".opt-box .next"),n=g.find(".opt-box .prev"),p=k.length,q=k.first().innerWidth(),g=l.parent(".list-box").innerWidth(),r=l.parent(".list-box").innerWidth()/2;l.parent(".list-box").width(g);""==a||void 0==a||"undefined"==a||null==a?(h.first().addClass("z-crt"),k.first().addClass("z-crt")):(h.eq(a).addClass("z-crt"),k.eq(a).addClass("z-crt"),f=3>a?0:a-2);1==p?(l.css("width","auto"),k.addClass("onlyone"),k.find(".u-finish-con").addClass("Left-fin")):2==p?(k.css("width",r+"px"),k.addClass("onlytwo"),k.find(".u-finish-con").addClass("Left-fin2")):(q=g/3,k.width(q),l.css("width",p*q+"px"),d());c(f);(function(){h.on("click",function(){var a=h.index(this);3<p&&(f=a==p-1||a==p-2?p-3:a,d(),c(a));b(a)})})();(function(){m.on("click",function(){f<p-3&&(f++,d(!0),c(f))});n.on("click",function(){0<f&&(f--,d(!0),c(f))})})();(function(){k.on("click",function(){var a=k.index(this);b(a)})})()}},photoPreview=$(window).photoPreview||{},photoPreview={p_index:0,f_index:0,element:{p_wrap:"#photoPreviewBd",layer:".g-photoPreview-layer",big_list:".m-preview-bList",small_list:".m-preview-sList"},photo_area_height:null,init:function(a){""!==a&&void 0!==a&&"undefined"!==a&&null!==a&&(this.p_index=a);this.show();this.close()},show:function(){var a=$(this.element.p_wrap);a.show();this.photo_area_height=parseInt($(this.element.layer).height()-140);a.find(this.element.big_list).css("height",this.photo_area_height+"px");this.bigPhoto(a);this.smallPhoto(a)},close:function(){$(this.element.p_wrap).on("click",".close",function(){$(photoPreview.element.p_wrap).hide()})},bigPhoto:function(a){var c=a.find(this.element.big_list).children().length;photoPreview.photoChange(a);photoPreview.hidePrevNextBtn();$("#photoPreiewPrev").off().on("click",function(){$("#photoPreiewNext").show();1===photoPreview.p_index&&$(this).hide();photoPreview.p_index--;photoPreview.photoChange(a);photoPreview.focusListChange(!0)});$("#photoPreiewNext").off().on("click",function(){$("#photoPreiewPrev").show();photoPreview.p_index>=c-2&&$(this).hide();photoPreview.p_index++;photoPreview.photoChange(a);photoPreview.focusListChange(!0)})},smallPhoto:function(a){var c=$(photoPreview.element.layer).find(photoPreview.element.small_list),b=c.children(),d=$("#photoPreiewFocusPrev"),f=$("#photoPreiewFocusNext"),g=b.length,h=b.innerWidth(),l=parseInt(b.css("marginRight")),k=c.parent().width(),k=Math.round(k/(h+l)),m=Math.ceil(g/k),n=(h+l)*k;photoPreview.f_index=parseInt(photoPreview.p_index/k);b.on("click.photoChange",function(){photoPreview.p_index=a.find(photoPreview.element.small_list).children().index(this);photoPreview.photoChange(a);photoPreview.hidePrevNextBtn()});d.off().on("click",function(){f.show();1>=photoPreview.f_index&&$(this).hide();photoPreview.f_index--;c.stop().animate({left:-n*photoPreview.f_index+"px"},200)});f.off().on("click",function(){d.show();photoPreview.f_index>=m-2&&$(this).hide();photoPreview.f_index++;c.stop().animate({left:-n*photoPreview.f_index+"px"},200)});photoPreview.focusListChange(!1)},photoChange:function(a){var c=a.find(photoPreview.element.big_list).children(),b=c.eq(photoPreview.p_index).children("img").height();c.removeClass("z-crt").eq(photoPreview.p_index).addClass("z-crt");c.eq(photoPreview.p_index).children("img").css("top",(photoPreview.photo_area_height-b)/2+"px");a.find(photoPreview.element.small_list).children().removeClass("z-crt").eq(photoPreview.p_index).addClass("z-crt")},hidePrevNextBtn:function(){var a=$(photoPreview.element.layer).find(photoPreview.element.big_list).children().length;0>=photoPreview.p_index?$("#photoPreiewPrev").hide():photoPreview.p_index<a-1?($("#photoPreiewPrev").show(),$("#photoPreiewNext").show()):$("#photoPreiewNext").hide()},focusListChange:function(a){var c=$(photoPreview.element.layer).find(photoPreview.element.small_list),b=c.children(),d=$("#photoPreiewFocusPrev"),f=$("#photoPreiewFocusNext"),g=b.length,h=b.innerWidth(),b=parseInt(b.css("marginRight")),l=c.parent().width(),l=Math.round(l/(h+b)),k=Math.ceil(g/l);photoPreview.f_index=parseInt(photoPreview.p_index/l);c.css("width",(h+b)*g+"px");1>=k?(d.hide(),f.hide()):0===photoPreview.f_index?d.hide():photoPreview.f_index<k-1?(d.show(),f.show()):photoPreview.f_index==k-1&&f.hide();d=(h+b)*l*photoPreview.f_index;a?c.stop().animate({left:-d+"px"},200):c.css("left",-d+"px")}},photo3dJs=$(window).photo3dJs||{};photo3dJs.fn={init:function(){this.publish_argue()},publish_argue:function(a){function c(){$(".am-pb-mod-vp").each(function(a,c){$(this).find(".m-add-opusTl .opus-num").text(a+1);$(this).find(".photo_div").attr("id","photo_div_"+a).attr("paramName","textInfo.textInfoFiles["+a+"].fileInfo");$(this).find(".textInfoFileTitle").attr("name","textInfo.textInfoFiles["+a+"].name");initPhotoUploader("photo_div_"+a,"textInfo.textInfoFiles["+a+"].fileInfo");initPhotoParam("photo_div_"+a,"textInfo.textInfoFiles["+a+"].fileInfo")})}var b=".ag-pbac-lst";""!=a&&"undefined"!=a&&null!=a&&void 0!=a&&(b=a);var d=$(b);(function(){d.on("click",".au-add-vp",function(){$(this).parents(".m-add-opus-ct").before('\x3cli class\x3d"m-add-opus-ct am-pb-mod-vp"\x3e\x3cdiv class\x3d"m-add-opusTl"\x3e\u4f5c\u54c1\x3cspan class\x3d"opus-num"\x3e1\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"m-addElement-item"\x3e\x3cdiv class\x3d"ltxt"\x3e\u4f5c\u54c1\u540d\u79f0\uff1a\x3c/div\x3e\x3cdiv class\x3d"c-center"\x3e\x3cdiv class\x3d"m-pbMod-ipt"\x3e\x3cinput type\x3d"text" value\x3d"" placeholder\x3d"\u8f93\u5165\u6d3b\u52a8\u540d\u79f0" class\x3d"u-pbIpt textInfoFileTitle"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"m-addElement-item last"\x3e\x3cdiv class\x3d"ltxt"\x3e\u4e0a\u4f20\u4f5c\u54c1\uff1a\x3c/div\x3e\x3cdiv class\x3d"photo_div c-center"\x3e\x3cdiv class\x3d"m-pbMod-udload"\x3e\x3ca href\x3d"javascript:void(0);" class\x3d"picker btn u-inverse-btn u-opt-btn"\x3e\x3ci class\x3d"u-upload-ico"\x3e\x3c/i\x3e\u4e0a\u4f20\u538b\u7f29\u5305\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"m-addElement-ex"\x3e\u6587\u4ef6\u683c\u5f0f\u5fc5\u987b\u4e3azip\uff0crar\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3ca href\x3d"javascript:void(0);" class\x3d"m-add-opus-del"\x3e\x3ci class\x3d"u-delete-ico"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e');c()})})();(function(){d.on("click",".m-add-opus-del",function(){if(1==$(".m-add-opus-del").length)return alert("\u81f3\u5c11\u9700\u8981\u4e0a\u4f20\u4e00\u4e2a\u4f5c\u54c1"),!1;var a=$(this);confirm("\u786e\u5b9a\u8981\u5220\u9664\u4f5c\u54c1\u5417?",function(){$vp_mod=a.parents(".am-pb-mod-vp");$vp_mod.remove();c()})})})();c()}};function initPhotoUploader(a,c){var b=WebUploader.create({swf:"/ncts/js/webphoto_uploader/Uploader.swf",server:"/file/uploadTemp",pick:"#"+a+" .picker",resize:!0,duplicate:!0,accept:{extensions:"zip,rar"}});b.on("fileQueued",function(c){if(1<=$("#"+a).find(".fileLi").length)return alert("\u53ea\u5141\u8bb8\u4e0a\u4f201\u4e2a\u9644\u4ef6"),b.removeFile(c.id),!1;var f=$("#photoLiTemplet").clone();f.attr("id",c.id).addClass("fileItem").show();f.find(".fileName").text(c.name);$("#"+a).find(".m-pbMod-udload").remove();$("#"+a).prepend(f);b.upload()});b.on("uploadProgress",function(a,c){var b=$("#"+a.id).find(".fileBar"),h=Math.round(100*c);b.find(".barLength").css("width",h+"%");b.find(".barNum").text(h+"%");b.find(".barTxt").text("\u4e0a\u4f20\u4e2d")});b.on("uploadSuccess",function(b,f){if(null!=f&&"00"==f.responseCode){$("#"+b.id).find(".fileBar").addClass("finish");$("#"+b.id).find(".barTxt").text("\u4e0a\u4f20\u6210\u529f");var g=f.responseData;$("#"+b.id).attr("fileId",g.id);$("#"+b.id).attr("url",g.url);$("#"+b.id).attr("fileName",g.fileName);$("#"+b.id).addClass("success");initPhotoParam(a,c)}});b.on("uploadError",function(a){$("#"+a.id).find(".fileBar").addClass("error");$("#"+a.id).find(".barTxt").text("\u4e0a\u4f20\u51fa\u9519")});b.on("uploadComplete",function(a){$("#"+a.id).find(".progress").fadeOut()});$("#"+a).off("click",".dlt");$("#"+a).on("click",".dlt",function(){$(this);confirm("\u662f\u5426\u786e\u5b9a\u5220\u9664\u8be5\u9644\u4ef6?",function(){$(this).parents(".fileLi").hasClass("fileItem")&&b.removeFile($(this).parents(".fileLi").attr("id"));$("#"+a).find(".fileLi").remove();$("#"+a).prepend($('\x3cdiv class\x3d"m-pbMod-udload"\x3e\x3ca href\x3d"javascript:void(0);" class\x3d"picker btn u-inverse-btn u-opt-btn"\x3e\x3ci class\x3d"u-upload-ico"\x3e\x3c/i\x3e\u4e0a\u4f20\u538b\u7f29\u5305\x3c/a\x3e\x3c/div\x3e'));initPhotoUploader(a,c);initPhotoParam(a,c)})});b.on("error",function(a){"Q_TYPE_DENIED"==a&&alert("\u8bf7\u68c0\u67e5\u4e0a\u4f20\u7684\u6587\u4ef6\u7c7b\u578b")})}function initPhotoParam(a,c){var b=$("#"+a);b.find(".fileParam").remove();b.find(".fileLi.success").each(function(a){a=$(this).attr("fileId");var b=$(this).attr("fileName"),g=$(this).attr("url");$(this).append('\x3cinput class\x3d"fileParam" name\x3d"'+c+'.id" value\x3d"'+a+'" type\x3d"hidden"/\x3e');$(this).append('\x3cinput class\x3d"fileParam" name\x3d"'+c+'.fileName" value\x3d"'+b+'" type\x3d"hidden"/\x3e');$(this).append('\x3cinput class\x3d"fileParam" name\x3d"'+c+'.url" value\x3d"'+g+'" type\x3d"hidden"/\x3e')});initFileType(b)}function initFileType(a){a.find(".fileLi").each(function(){var a=$(this),b=a.find(".fileName").text(),a=a.find(".fileIcon"),d=b.split("."),b=d.length,d=d[b-1];1!=b&&("doc"==d||"docx"==d?a.addClass("doc"):"xls"==d||"xlsx"==d?a.addClass("excel"):"ppt"==d||"pptx"==d?a.addClass("ppt"):"pdf"==d?a.addClass("pdf"):"txt"==d?a.addClass("txt"):"zip"==d||"rar"==d?a.addClass("zip"):"jpg"==d||"jpeg"==d||"png"==d||"gif"==d?a.addClass("pic"):"mp4"==d||"avi"==d||"rmvb"==d||"rm"==d||"asf"==d||"divx"==d||"mpg"==d||"mpeg"==d||"mpe"==d||"wmv"==d||"mkv"==d||"vob"==d||"3gp"==d?a.addClass("video"):a.addClass("other"))})};